#!/bin/bash -i
MPI_COMP = mpicxx

run: setup-mpi
	@sbatch -A proj_1651 job-script.sh

setup-mpi: clear build-mpi

build-mpi:
	@echo "ðŸ”„ Starting build..."
	@module load openmpi/4.1.5_cuda12; \
	$(MPI_COMP) ./main.cxx -o main || exit 1;
	@echo "âœ… Success CXXMPI build!"

clear:
	@rm -f ./main; \
	rm -f ./*.log;
	@echo "âœ… Success clean!"

.PHONY:
	logs
	all
